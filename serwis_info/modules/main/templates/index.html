{% extends "template.html" %}

{% block title %}Strona główna – Serwis informacyjny{% endblock %}

{% block body_class %}home-page{% endblock %}

{% block extra_css %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('main.static', filename='mainpage.css') }}">
    <link rel="stylesheet" href="{{ url_for('main.static', filename='calendar.css') }}">
{% endblock %}

{% block extra_js %}
    {{ super() }}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('main.static', filename='script.js') }}"></script>
{% endblock %}
{% block content %}
<section class="home-layout" aria-label="Nawigacja po modułach serwisu">
  <div class="cards-grid">

    {# LEWA KOLUMNA: KALENDARZ + NEWS #}
    <div class="col-left">

      <a href="{{ url_for('horoscope.horoscope_page') }}" class="card-item card-calendar">

        <div class="calendar-horizontal">

          <div class="calendar-left">
            <div class="calendar-time" id="calendar-time">Ładowanie...</div>
            <div class="calendar-date" id="calendar-date">Ładowanie...</div>
          </div>

          <div class="calendar-right">

            <div class="calendar-box">
              <span class="calendar-label">Imieniny:</span>
              <span class="calendar-value" id="calendar-namedays">Ładowanie...</span>
            </div>

            <div class="calendar-box">
              <span class="calendar-label">Status dnia:</span>
              <span class="calendar-value" id="calendar-dayoff">Ładowanie...</span>
            </div>

            <div class="calendar-box">
              <span class="calendar-label">Święto:</span>
              <span class="calendar-value" id="calendar-holiday">Ładowanie...</span>
            </div>

            <div class="calendar-box">
              <span class="calendar-label">Dzień roku:</span>
              <span class="calendar-value" id="calendar-daynum">Ładowanie...</span>
            </div>

          </div>
        </div>

      </a>

      {# KAFEL – NEWSY #}
      <a href="{{ url_for('news.news_home') }}" class="card-item card-news">
        <span class="card-title">News</span>
      </a>

    </div>  {# koniec .col-left #}

    {# PRAWA KOLUMNA: POGODA + ECONOMY #}
    <div class="col-right">
      {# KAFEL – POGODA #}
      <a href="{{ url_for('weather_api.dashboard_page') }}" class="card-item card-weather">
        <div class="weather-mini">
          <div class="weather-header">
            <p class="wm-city">Warszawa</p>
            <img id="mini-icon" class="wm-icon" style="display:none;">
          </div>

          <p id="mini-temp" class="wm-temp">Ładowanie...</p>
          <p id="mini-desc" class="wm-desc"></p>

          <div class="weather-forecast-mini" id="forecast-mini">
            Ładowanie prognozy...
          </div>
        </div>
      </a>

      {# KAFEL – ECONOMY #}
      <a href="{{ url_for('currencies.currencies') }}" class="card-item card-economy">
        <div class="currency-header">
          <div class="usd">
            <div class="currency-line">USD/PLN: <span id="usd-pln">{{ usd_pln if usd_pln else 'brak danych' }}</span></div>
            <div class="spark-row">
              <div class="spark-y-vertical">
                <div class="y-max" id="usd-spark-ymax"></div>
                <div class="y-min" id="usd-spark-ymin"></div>
              </div>
              <div class="spark-canvas-wrap">
                <canvas id="usd-spark" class="sparkline" width="160" height="48"></canvas>
                <div class="spark-x">
                  <span class="x-start" id="usd-spark-xstart"></span>
                  <span class="x-end" id="usd-spark-xend"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="eur">
            <div class="currency-line">EUR/PLN: <span id="eur-pln">{{ eur_pln if eur_pln else 'brak danych' }}</span></div>
            <div class="spark-row">
              <div class="spark-y-vertical">
                <div class="y-max" id="eur-spark-ymax"></div>
                <div class="y-min" id="eur-spark-ymin"></div>
              </div>
              <div class="spark-canvas-wrap">
                <canvas id="eur-spark" class="sparkline" width="160" height="48"></canvas>
                <div class="spark-x">
                  <span class="x-start" id="eur-spark-xstart"></span>
                  <span class="x-end" id="eur-spark-xend"></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="gold-section">
          <div class="gold-price">
            Złoto: <span id="gold-price">{{ gold_price|round(2) if gold_price else 'brak danych' }}</span> USD/oz
          </div>
          <canvas id="gold-chart"></canvas>
        </div>
      </a>
    </div>  {# koniec .col-right #}

  </div>
</section>

{% endblock %}

