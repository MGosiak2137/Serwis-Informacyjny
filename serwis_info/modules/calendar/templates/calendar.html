<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Serwis Informacyjny â€“ Kalendarz</title>

  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link rel="stylesheet" href="/calendar/static/style.css">
</head>

<body class="calendar-layout">
  <main class="main-content">
    <div class="home-layout">
      <div class="cards-grid">
        <div class="card-item card-calendar calendar-card" onclick="window.location.href='/calendar/horoscope'">
          <div class="calendar-content">
            <div class="calendar-header">
              <h2 class="card-title">ğŸ—“ï¸ Kartka z kalendarza</h2>
            </div>
            <div class="calendar-body">
              <p><strong>Data:</strong> <span id="calendar-date">Åadowanie...</span></p>
              <p><strong>Godzina:</strong> <span id="calendar-time">Åadowanie...</span></p>
              <p><strong>DzieÅ„ roku:</strong> <span id="calendar-daynum">Åadowanie...</span></p>
              <p><strong>Imieniny:</strong> <span id="calendar-namedays">Åadowanie...</span></p>
              <p><strong>ÅšwiÄ™to:</strong> <span id="calendar-holiday">Åadowanie...</span></p>
              <p><strong>Status dnia:</strong> <span id="calendar-dayoff">Åadowanie...</span></p>
            </div>
            <div class="calendar-footer">
              <p>Kliknij, aby przejÅ›Ä‡ do horoskopu â†’</p>
            </div>
          </div>
        </div>
        
        <!-- PozostaÅ‚e kafelki (puste) -->
        <div class="card-item card-weather">
          <div class="card-title">ğŸŒ¤ï¸ Pogoda</div>
        </div>
        <div class="card-item card-news">
          <div class="card-title">ğŸ“° WiadomoÅ›ci</div>
        </div>
        <div class="card-item card-economy">
          <div class="card-title">ğŸ’¹ Gospodarka</div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    async function loadCalendar() {
      try {
        const response = await fetch("/calendar/api/calendar");
        const data = await response.json();
        document.getElementById("calendar-date").textContent = data.date;
        document.getElementById("calendar-daynum").textContent = data.day_of_year;
        document.getElementById("calendar-namedays").textContent = data.namedays.join(", ");
        document.getElementById("calendar-holiday").textContent = data.holiday_name || "Brak Å›wiÄ™ta";
        document.getElementById("calendar-dayoff").textContent = data.is_holiday ? "DzieÅ„ wolny od pracy" : "DzieÅ„ roboczy";
      } catch (err) {
        console.error("BÅ‚Ä…d wczytywania kalendarza:", err);
        document.getElementById("calendar-date").textContent = "BÅ‚Ä…d Å‚adowania";
      }
    }

    function updateClock() {
      const now = new Date();
      const time = now.toLocaleTimeString("pl-PL", { 
        hour: "2-digit", 
        minute: "2-digit" 
      });
      document.getElementById("calendar-time").textContent = time;
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadCalendar();
      updateClock();
      setInterval(updateClock, 60000);
    });
  </script>
</body>
</html>