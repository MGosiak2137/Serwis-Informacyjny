{% extends "nav_foot_eco.html" %}

{% block header %}
<link rel="stylesheet" href="{{ url_for('currencies.static', filename='currencies.css') }}">
<script src="{{ url_for('currencies.static', filename='currencies.js') }}"></script>
{% endblock %}

{% block main %}
<main class="page-main">
  <section id="home" class="currency-section">
    <h2>{{ title or "Kursy walut" }}</h2>

    <div class="currency-container">
      {% if rates %}
      <table class="currency-table" aria-label="Kursy walut">
        <thead>
          <tr><th>Waluta</th><th>Kod</th><th>Kurs</th></tr>
        </thead>
        <tbody>
          {% for r in rates %}
          <tr>
            <td>{{ r.name }}</td>
            <td>{{ r.code }}</td>
            <td>{{ r.rate }}</td>
            <td class="fav-cell">
              <span class="currency-star"
                    data-code="{{ r.code }}"
                    data-name="{{ r.name }}">
                ‚òÖ
              </span>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p class="muted">Brak dostƒôpnych danych. Poni≈ºej przyk≈Çadowe kursy:</p>
      <table class="currency-table" aria-hidden="true">
        <thead><tr><th>Waluta</th><th>Kod</th><th>Kurs</th></tr></thead>
        <tbody>
          <tr><td>Dolar</td><td>USD</td><td>4.21</td></tr>
          <tr><td>Euro</td><td>EUR</td><td>4.60</td></tr>
          <tr><td>Funt</td><td>GBP</td><td>5.31</td></tr>
        </tbody>
      </table>
      {% endif %}
    </div>

    <!-- üîΩ Formularz konwersji -->
    <div class="currency-converter">
      <h3>Przelicz walutƒô</h3>
      <form method="post" action="{{ url_for('currencies.convert') }}">
        <div class="converter-row">
          <input type="number" name="amount" step="0.01" placeholder="Kwota" required>
          <select name="from_currency" required>
            <option value="USD">USD - dolar ameryka≈Ñski</option>
            <option value="EUR">EUR - euro</option>
            <option value="GBP">GBP - funt brytyjski</option>
            <option value="PLN">PLN - z≈Çoty polski</option>
            <option value="CHF">CHF - frank szwajcarski</option>
            <option value="JPY">JPY - jen</option>
            <option value="CZK">CZK - korona czeska</option>
            <option value="NOK">NOK - korona norweska</option>
            <option value="SEK">SEK - korona szwedzka</option>
            <option value="DKK">DKK - korona du≈Ñska</option>
            <option value="HUF">HUF - forint</option>
            <option value="CNY">CNY - juan</option>
            <option value="AUD">AUD - dolar australijski</option>
            <option value="CAD">CAD - dolar kanadyjski</option>

          </select>
          <span>‚û°Ô∏è</span>
          <select name="to_currency" required>
            <option value="USD">USD - dolar ameryka≈Ñski</option>
            <option value="EUR">EUR - euro</option>
            <option value="GBP">GBP - funt brytyjski</option>
            <option value="PLN">PLN - z≈Çoty polski</option>
            <option value="CHF">CHF - frank szwajcarski</option>
            <option value="JPY">JPY - jen</option>
            <option value="CZK">CZK - korona czeska</option>
            <option value="NOK">NOK - korona norweska</option>
            <option value="SEK">SEK - korona szwedzka</option>
            <option value="DKK">DKK - korona du≈Ñska</option>
            <option value="HUF">HUF - forint</option>
            <option value="CNY">CNY - juan</option>
            <option value="AUD">AUD - dolar australijski</option>
            <option value="CAD">CAD - dolar kanadyjski</option>

          </select>
          <button type="submit">Konwertuj</button>
        </div>
      </form>

      {% if converted %}
      <p class="converter-result">
        üí± {{ amount }} {{ from_currency }} = <strong>{{ converted }} {{ to_currency }}</strong>
      </p>
      {% endif %}
    </div>
  </section>
</main>
{% endblock %}
