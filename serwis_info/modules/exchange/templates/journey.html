{% extends "nav_foot_eco.html" %}

{% block header %}
<link rel="stylesheet" href="{{ url_for('journey.static', filename='journey.css') }}">
{% endblock %}

{% block main %}
<main class="page-main journey-page">
  <section class="journey-section">
    <h2>Wyszukiwarka lot√≥w</h2>
    <p class="lead">Znajd≈∫ najlepsze ceny lot√≥w w obie strony.</p>

    <form class="journey-form" method="get" action="/journey">
      <label>
        Lotnisko wylotu (IATA)
        <input type="text" name="origin" placeholder="np. WAW" value="{{ origin or '' }}">
      </label>

      <label>
        Lotnisko docelowe (IATA)
        <input type="text" name="destination" placeholder="np. JFK" value="{{ destination or '' }}">
      </label>

      <label>
        Data wylotu
        <input type="date" name="date_from" value="{{ date_from or '' }}">
      </label>

      <label>
        Data powrotu
        <input type="date" name="date_to" value="{{ date_to or '' }}">
      </label>

      <label>
        Klasa podr√≥≈ºy
        <select name="cabin">
          <option value="ECO" {% if cabin == "ECO" %}selected{% endif %}>Economy</option>
          <option value="PEC" {% if cabin == "PEC" %}selected{% endif %}>Premium Economy</option>
          <option value="BUS" {% if cabin == "BUS" %}selected{% endif %}>Business</option>
          <option value="FST" {% if cabin == "FST" %}selected{% endif %}>First Class</option>
        </select>
      </label>

      <label>
        Liczba pasa≈ºer√≥w
        <input type="number" min="1" name="people" value="{{ people or 1 }}">
      </label>

      <div class="form-actions">
        <button type="submit" class="btn-primary">Szukaj lot√≥w</button>
      </div>
    </form>

    {% if error %}
      <p class="error">{{ error }}</p>
    {% endif %}

    {% if flights %}
    <section class="results-section">
      <h3>Najlepsze oferty</h3>

      <ul class="flights-list">
        {% for f in flights %}
        <li>
          ‚úàÔ∏è <strong>{{ f.airline }}</strong><br>
          {{ f.dep }} ‚Üí {{ f.arr }}  
          ‚Ä¢ czas: {{ f.duration }} min  
          ‚Ä¢ cena: <strong>{{ f.price }} USD</strong>
        </li>
        {% endfor %}
      </ul>

      {% if summary %}
      <div class="summary-box">
        <h4>Statystyki cen</h4>
        <p>üí∞ ≈örednia: <strong>{{ summary.avg }} USD</strong></p>
        <p>üìâ Najni≈ºsza: <strong>{{ summary.min }} USD</strong></p>
        <p>üìà Najwy≈ºsza: <strong>{{ summary.max }} USD</strong></p>
      </div>
      {% endif %}
    </section>
    {% endif %}
  </section>
</main>
{% endblock %}
