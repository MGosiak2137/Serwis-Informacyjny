{% extends "nav_footnews.html" %}

{% block header %}
<link rel="stylesheet" href="{{ url_for('news.static', filename='detail.css') }}">
{% endblock %}

{% block main %}
<main class="page-main detail-page">
  <article class="news-detail">
    {% if article %}
    <header class="detail-header">
      <h1>{{ article.title }}</h1>
      <div class="detail-meta">
        <time datetime="{{ article.published_at.isoformat() if article.published_at else '' }}">
          {{ article.published_at.strftime("%d.%m.%Y o %H:%M") if article.published_at else "Brak daty" }}
        </time>
        {% if article.source_name %}
        <span class="source">{{ article.source_name }}</span>
        {% endif %}
      </div>
    </header>

    <div class="detail-content">
      {% if article.summary %}
      <p class="summary">{{ article.summary }}</p>
      {% endif %}

      {% if article.content %}
      <div class="article-text">
        {{ article.content }}
      </div>
      {% endif %}
    </div>

    <footer class="detail-footer">
      {% if article.source_url %}
      <a href="{{ article.source_url }}" target="_blank" rel="noopener noreferrer" class="btn-primary">
        Czytaj w źródle
      </a>
      {% endif %}
      <a href="{{ request.referrer or url_for('news.search') }}" class="btn-secondary">Wróć</a>
    </footer>
    {% else %}
    <div class="error-message">
      <h2>Artykuł nie znaleziony</h2>
      <p><a href="{{ url_for('news.search') }}">Powróć do wyszukiwarki</a></p>
    </div>
    {% endif %}
  </article>
</main>
{% endblock %}
